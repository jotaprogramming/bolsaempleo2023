{% extends 'core/base.html' %}
{% load static %}
{% block title %}
<title>{{app_title}} | {{title_view}}</title>
{% endblock title %}

{% block contentfluid %}
<section class="my-1 position-relative">
  {% include 'partials/_aside.html' %}
  <div class="d-flex justify-content-center p-5" style="margin-left: 300px;">
    <div class="row gap-4" style="width: 50rem;">
      <h3 class="col-12">Perfil</h3>
      <div class="card col-12">
        <div class="card-body d-flex justify-content-between align-items-center">
          <div class="d-flex gap-4 justify-content-between align-items-center">
            <div class="img-content__info">
              <img src="{% static 'core/assets/img/montains.jpg' %}" alt="" />
            </div>
            <div class="d-flex flex-column gap-1 justify-content-center align-items-start">
              <h5 class="fw-bold m-0">
                {% if object.name %}
                {{ object.name }}
                {% else %}
                @{{ username }}
                {% endif %}
              </h5>
              <p class="text-muted m-0 fw-light">
                {% for trait in traits %}
                {{ trait.usergroup.group_name }}
                {% endfor %}
              </p>
            </div>
          </div>
          <div class="col-2">
            {% if request.user.is_staff or request.user.username == object.user.username %}
            {% if object.user %}
            <a
              class="btn btn-outline-primary btn-center"
              href="{% url 'users_app:userprofile_edit' username %}"
            >
              <i class="lni lni-pencil"></i>
              <span class="ms-2">Editar</span>
            </a>
            {% else %}
            <a
              class="btn btn-outline-primary btn-center data-info__btn--edit"
              href="{% url 'users_app:userprofile_add' username %}"
            >
              <i class="lni lni-pencil"></i>
              <span class="ms-2">Editar</span>
            </a>
            {% endif %}
            {% endif %}
          </div>
          {% comment %} <button class="btn btn-outline-primary" type="button" style="height: fit-content;">Actualizar</button> {% endcomment %}
        </div>
      </div>
      <div class="card col-12">
        <div class="card-body">
          <div class="row">
            <h5 class="fw-bold m-0 col-12 mb-3">Información de usuario</h5>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Usuario
                </p>
                <p class="col-12 m-0">
                  {% if object.user.username %}
                  @{{ object.user.username }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Correo electrónico de registro
                </p>
                <p class="col-12 m-0">
                  {% if object.user.email %}
                  {{ object.user.email }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            {% if request.user.is_staff or request.user.username == object.user.username %}
            <div class="col-md-12 my-2">
              <a
                class="btn btn-outline-primary col-4"
                href="{% url 'users_app:credentials_recover' %}"
              >
                <i class="lni lni-padlock"></i>
                <span class="ms-2">Cambiar contraseña</span>
              </a>
            </div>
            {% endif %}
            <hr class="mt-3">
            <h5 class="fw-bold m-0 col-12 mb-3">Información personal</h5>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Tipo de documento
                </p>
                <p class="col-12 m-0">
                  {% if object.document_type.name %}
                  {{ object.document_type.name }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Identificación
                </p>
                <p class="col-12 m-0">
                  {% if object.id_number %}
                  {{ object.id_number }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Nombre completo
                </p>
                <p class="col-12 m-0">
                  {% if object.user.first_name or object.user.last_name %}
                  {{ object.user.first_name }}
                  {{ object.user.last_name }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Alias
                </p>
                <p class="col-12 m-0">
                  {% if object.name %}
                  {{ object.name }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Correo electrónico de contacto
                </p>
                <p class="col-12 m-0">
                  {% if object.email %}
                  {{ object.email }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Teléfono
                </p>
                <p class="col-12 m-0">
                  {% if object.phone %}
                  {{ object.phone }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  País
                </p>
                <p class="col-12 m-0">
                  {% if object.city.district.country %}
                  {{ object.city.district.country }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Departamento
                </p>
                <p class="col-12 m-0">
                  {% if object.city.district %}
                  {{ object.city.district }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Ciudad
                </p>
                <p class="col-12 m-0">
                  {% if object.city %}
                  {{ object.city }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Dirección
                </p>
                <p class="col-12 m-0">
                  {% if object.address %}
                  {{ object.address }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-12 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Sobre mí
                </p>
                <p class="col-12 m-0">
                  {% if object.about_me %}
                  {{ object.about_me }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
            <div class="col-md-6 mb-2">
              <div class="row">
                <p class="col-12 fw-bold mb-1">
                  Hoja de vida
                </p>
                <p class="col-12 m-0">
                  {% if object.user_cv.cv_path %}
                  {{ object.user_cv.cv_path }}
                  {% else %}
                  ------
                  {% endif %}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock contentfluid %}
